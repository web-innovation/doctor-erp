import{r as x,p as q,j as e,O as E,P as K,Q as L,Y as P,q as _,B as z}from"./index-R75PvMZ4.js";import{a as B}from"./appointmentService-D9UzptJj.js";const N={scheduled:"bg-blue-500",confirmed:"bg-indigo-500",completed:"bg-green-500",cancelled:"bg-red-500","no-show":"bg-gray-500"},w={scheduled:"bg-blue-100 border-blue-200",confirmed:"bg-indigo-100 border-indigo-200",completed:"bg-green-100 border-green-200",cancelled:"bg-red-100 border-red-200","no-show":"bg-gray-100 border-gray-200"},H=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],J=["January","February","March","April","May","June","July","August","September","October","November","December"];function U(){const[r,p]=x.useState("month"),[c,u]=x.useState(new Date),[h,D]=x.useState(null),[v,b]=x.useState(!1),n=c.getMonth(),i=c.getFullYear(),{data:y,isLoading:M}=q({queryKey:["calendar",n+1,i],queryFn:()=>B.getCalendarData(n+1,i)}),C=(y==null?void 0:y.data)||{},k=x.useMemo(()=>{const t=new Date(i,n,1),a=new Date(i,n+1,0),o=t.getDay(),l=a.getDate(),m=[];for(let s=0;s<o;s++){const d=new Date(i,n,-o+s+1);m.push({date:d,isCurrentMonth:!1,dayNumber:d.getDate()})}for(let s=1;s<=l;s++){const d=new Date(i,n,s);m.push({date:d,isCurrentMonth:!0,dayNumber:s})}const g=42-m.length;for(let s=1;s<=g;s++){const d=new Date(i,n+1,s);m.push({date:d,isCurrentMonth:!1,dayNumber:s})}return m},[n,i]),$=x.useMemo(()=>{if(r!=="week")return[];const t=new Date(c);return t.setDate(c.getDate()-c.getDay()),Array.from({length:7},(a,o)=>{const l=new Date(t);return l.setDate(t.getDate()+o),{date:l,isCurrentMonth:l.getMonth()===n,dayNumber:l.getDate()}})},[c,r,n]),S=r==="week"?$:k,O=()=>{if(r==="month")u(new Date(i,n-1,1));else{const t=new Date(c);t.setDate(c.getDate()-7),u(t)}},A=()=>{if(r==="month")u(new Date(i,n+1,1));else{const t=new Date(c);t.setDate(c.getDate()+7),u(t)}},F=()=>{u(new Date)},T=t=>t.toISOString().split("T")[0],j=t=>{const a=T(t);return C[a]||[]},I=t=>{D(t.date),b(!0)},W=t=>{if(!t)return"-";const[a,o]=t.split(":"),l=parseInt(a,10),m=l>=12?"PM":"AM";return`${l%12||12}:${o} ${m}`},Y=t=>{const a=new Date;return t.getDate()===a.getDate()&&t.getMonth()===a.getMonth()&&t.getFullYear()===a.getFullYear()},f=h?j(h):[];return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Appointment Calendar"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"View and manage appointments on the calendar"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p("week"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="week"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100 border border-gray-300"}`,children:"Week"}),e.jsx("button",{onClick:()=>p("month"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="month"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100 border border-gray-300"}`,children:"Month"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:O,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(E,{className:"text-gray-600"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:r==="month"?`${J[n]} ${i}`:`Week of ${c.toLocaleDateString("en-IN",{month:"short",day:"numeric",year:"numeric"})}`}),e.jsx("button",{onClick:A,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(K,{className:"text-gray-600"})})]}),e.jsx("button",{onClick:F,className:"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg font-medium transition-colors",children:"Today"})]}),e.jsxs("div",{className:"flex items-center gap-4 px-4 py-3 bg-gray-50 border-b border-gray-100",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status:"}),Object.entries(N).map(([t,a])=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${a}`}),e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:t})]},t))]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:H.map(t=>e.jsx("div",{className:"text-center text-sm font-semibold text-gray-500 py-2",children:t},t))}),M?e.jsx("div",{className:"grid grid-cols-7 gap-1",children:[...Array(r==="week"?7:35)].map((t,a)=>e.jsx("div",{className:"aspect-square p-2 animate-pulse bg-gray-100 rounded-lg"},a))}):e.jsx("div",{className:`grid grid-cols-7 gap-1 ${r==="week"?"":"grid-rows-6"}`,children:S.map((t,a)=>{const o=j(t.date),l=o.length>0,m=Y(t.date),g=o.reduce((s,d)=>(s[d.status]=(s[d.status]||0)+1,s),{});return e.jsxs("div",{onClick:()=>I(t),className:`
                        ${r==="week"?"min-h-[150px]":"aspect-square"}
                        p-2 rounded-lg cursor-pointer transition-all border
                        ${t.isCurrentMonth?"bg-white hover:bg-gray-50":"bg-gray-50 text-gray-400"}
                        ${m?"ring-2 ring-blue-500 ring-offset-2":"border-gray-100"}
                        ${l&&t.isCurrentMonth?"hover:shadow-md":""}
                      `,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:`text-sm font-medium ${m?"w-7 h-7 flex items-center justify-center bg-blue-600 text-white rounded-full":""}`,children:t.dayNumber}),l&&t.isCurrentMonth&&e.jsx("span",{className:"text-xs text-gray-500",children:o.length})]}),l&&t.isCurrentMonth&&e.jsxs("div",{className:"space-y-1",children:[Object.entries(g).slice(0,r==="week"?5:3).map(([s,d])=>e.jsxs("div",{className:`text-xs px-1.5 py-0.5 rounded truncate ${w[s]} border`,children:[d," ",s]},s)),Object.keys(g).length>(r==="week"?5:3)&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",Object.keys(g).length-(r==="week"?5:3)," more"]})]})]},a)})})]})]}),e.jsx(L,{isOpen:v,onClose:()=>b(!1),title:h?h.toLocaleDateString("en-IN",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):"Appointments",size:"lg",children:e.jsx("div",{className:"space-y-3",children:f.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(P,{className:"text-4xl text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No appointments scheduled for this day"})]}):f.map(t=>{var a,o;return e.jsxs("div",{className:`p-4 rounded-lg border ${w[t.status]}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm",children:e.jsx(_,{className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:((a=t.patient)==null?void 0:a.name)||"Unknown Patient"}),e.jsx("p",{className:"text-sm text-gray-500",children:t.type||"Consultation"})]})]}),e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium capitalize ${N[t.status]} text-white`,children:t.status})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"text-gray-400"}),W(t.time)]}),((o=t.patient)==null?void 0:o.phone)&&e.jsx("div",{className:"flex items-center gap-1",children:e.jsx("span",{children:t.patient.phone})})]}),t.reason&&e.jsx("p",{className:"mt-2 text-sm text-gray-600 bg-white/50 p-2 rounded",children:t.reason})]},t.id)})})})]})})}export{U as default};
