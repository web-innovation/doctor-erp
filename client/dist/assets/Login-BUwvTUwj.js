import{u as f,a as j,r as y,b as N,c as w,j as e,L as n,F as v,d as P,e as S,f as E,g as F,z as x}from"./index-C3V5QAXj.js";function L(){var c,d,m;const u=f(),{login:g}=j(),[o,h]=y.useState(!1),{register:i,handleSubmit:b,formState:{errors:t}}=N({defaultValues:{email:"",password:"",rememberMe:!1}}),r=w({mutationFn:F.login,onSuccess:s=>{console.log("Login response:",s),g(s.user,s.token),x.success("Login successful!"),u("/dashboard")},onError:s=>{var a,l;x.error(((l=(a=s.response)==null?void 0:a.data)==null?void 0:l.message)||"Invalid credentials")}}),p=s=>{r.mutate(s)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(n,{to:"/",className:"inline-flex items-center space-x-2",children:[e.jsx(v,{className:"h-10 w-10 text-blue-600"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"Docsy ERP"})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mt-6",children:"Welcome back"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Sign in to your account to continue"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("form",{onSubmit:b(p),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email or Phone"}),e.jsx("input",{type:"text",id:"email",...i("email",{required:"Email or phone is required",validate:s=>{const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,l=/^[6-9]\d{9}$/;return!a.test(s)&&!l.test(s)?"Enter a valid email or 10-digit phone number":!0}}),className:`w-full px-4 py-3 rounded-lg border ${t.email?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2 transition`,placeholder:"doctor@clinic.com or 9876543210"}),t.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o?"text":"password",id:"password",...i("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),className:`w-full px-4 py-3 rounded-lg border ${t.password?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2 transition pr-12`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>h(!o),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?e.jsx(P,{}):e.jsx(S,{})})]}),t.password&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:t.password.message})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",...i("rememberMe"),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),e.jsx(n,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})]}),r.isError&&e.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:((m=(d=(c=r.error)==null?void 0:c.response)==null?void 0:d.data)==null?void 0:m.message)||"Login failed. Please try again."}),e.jsx("button",{type:"submit",disabled:r.isPending,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:r.isPending?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"animate-spin mr-2"}),"Signing in..."]}):"Sign In"})]}),e.jsxs("div",{className:"my-6 flex items-center",children:[e.jsx("div",{className:"flex-1 border-t border-gray-200"}),e.jsx("span",{className:"px-4 text-sm text-gray-400",children:"or"}),e.jsx("div",{className:"flex-1 border-t border-gray-200"})]}),e.jsxs("p",{className:"text-center text-gray-600",children:["Don't have an account?"," ",e.jsx(n,{to:"/register",className:"text-blue-600 font-semibold hover:text-blue-700",children:"Create account"})]})]}),e.jsxs("div",{className:"text-center text-gray-400 text-sm mt-8",children:[e.jsxs("p",{children:["Â© ",new Date().getFullYear()," Docsy ERP. All rights reserved."]}),e.jsx("p",{className:"mt-1",children:e.jsx(n,{to:"/privacy",className:"text-gray-500 hover:underline",children:"Privacy Policy"})})]})]})})}export{L as default};
