const b={billTemplateId:"classic",prescriptionTemplateId:"modern"},R=[{value:"classic",label:"Classic Invoice"},{value:"modern",label:"Modern Card"},{value:"compact",label:"Compact Minimal"},{value:"custom",label:"Custom HTML"}],B=[{value:"modern",label:"Modern Clinical"},{value:"classic",label:"Classic Doctor Pad"},{value:"compact",label:"Compact Sheet"},{value:"custom",label:"Custom HTML"}];function x(t){const s=t&&typeof t=="object"?t:{};return{billTemplateId:String(s.billTemplateId||b.billTemplateId),prescriptionTemplateId:String(s.prescriptionTemplateId||b.prescriptionTemplateId),customBillHtml:String(s.customBillHtml||""),customPrescriptionHtml:String(s.customPrescriptionHtml||"")}}function e(t){return String(t??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function v(t){if(!t)return"-";const s=new Date(t);return Number.isNaN(s.getTime())?"-":s.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}function l(t){return`INR ${Number(t||0).toFixed(2)}`}function N(t){return t?String(t).replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gi,"").replace(/\son[a-z]+\s*=\s*\"[^\"]*\"/gi,"").replace(/\son[a-z]+\s*=\s*'[^']*'/gi,"").trim():""}function T(t,s){return Object.entries(s).reduce((r,[n,o])=>{const a=new RegExp(`{{\\s*${n}\\s*}}`,"g");return r.replace(a,String(o??""))},t)}function P(t,s){return/<html[\s>]/i.test(t)?t:`<!doctype html><html><head><meta charset="utf-8"><title>${e(s||"Print")}</title><style>body{font-family:Arial,sans-serif;padding:20px;color:#111}table{width:100%;border-collapse:collapse}th,td{padding:8px;border:1px solid #ddd}h1,h2,h3{margin:0 0 10px}</style></head><body>${t}</body></html>`}function D(t,s={}){var o,a,c;const n=(Array.isArray(t==null?void 0:t.items)?t.items:[]).map((d,p)=>{const m=Number((d==null?void 0:d.quantity)||0),h=Number((d==null?void 0:d.unitPrice)||0),g=m*h;return`<tr><td>${p+1}</td><td>${e((d==null?void 0:d.description)||"")}</td><td style="text-align:center">${m}</td><td style="text-align:right">${l(h)}</td><td style="text-align:right">${l(g)}</td></tr>`}).join("");return{clinicName:e((s==null?void 0:s.clinicName)||"Clinic"),clinicPhone:e((s==null?void 0:s.phone)||""),clinicAddress:e((s==null?void 0:s.address)||""),billNo:e((t==null?void 0:t.billNo)||(t==null?void 0:t.id)||"-"),billDate:e(v(t==null?void 0:t.createdAt)),patientName:e(((o=t==null?void 0:t.patient)==null?void 0:o.name)||"-"),patientPhone:e(((a=t==null?void 0:t.patient)==null?void 0:a.phone)||"-"),doctorName:e(((c=t==null?void 0:t.doctor)==null?void 0:c.name)||"-"),paymentStatus:e(String((t==null?void 0:t.paymentStatus)||"PENDING")),itemsTableRows:n,subtotal:e(l((t==null?void 0:t.subtotal)||0)),discount:e(l((t==null?void 0:t.discountAmount)||0)),tax:e(l((t==null?void 0:t.taxAmount)||0)),total:e(l((t==null?void 0:t.totalAmount)||0)),paid:e(l((t==null?void 0:t.paidAmount)||0)),due:e(l((t==null?void 0:t.dueAmount)||0)),notes:e((t==null?void 0:t.notes)||"")}}function A(t,s={}){var h,g,f,y,$;const n=(Array.isArray(t==null?void 0:t.medicines)?t.medicines:[]).map((i,u)=>`<tr><td>${u+1}</td><td>${e((i==null?void 0:i.medicineName)||"-")}</td><td>${e((i==null?void 0:i.dosage)||"-")}</td><td>${e((i==null?void 0:i.frequency)||"-")}</td><td>${e((i==null?void 0:i.duration)||"-")}</td><td>${e((i==null?void 0:i.timing)||"-")}</td></tr>`).join(""),o=Array.isArray(t==null?void 0:t.diagnosis)?t.diagnosis:[],a=o.length?`<ul>${o.map(i=>`<li>${e(i)}</li>`).join("")}</ul>`:"<div>-</div>",c=Array.isArray(t==null?void 0:t.labTests)?t.labTests:[],d=c.length?`<ul>${c.map(i=>`<li>${e((i==null?void 0:i.testName)||"")}${i!=null&&i.instructions?` - ${e(i.instructions)}`:""}</li>`).join("")}</ul>`:"<div>-</div>",p=(t==null?void 0:t.vitalsSnapshot)||{},m=Object.entries(p).filter(([,i])=>i!=null&&String(i)!=="").map(([i,u])=>`<li>${e(i)}: ${e(u)}</li>`).join("")||"<li>-</li>";return{clinicName:e((s==null?void 0:s.clinicName)||"Clinic"),clinicPhone:e((s==null?void 0:s.phone)||""),clinicAddress:e((s==null?void 0:s.address)||""),prescriptionNo:e((t==null?void 0:t.prescriptionNo)||(t==null?void 0:t.id)||"-"),prescriptionDate:e(v(t==null?void 0:t.createdAt)),patientName:e(((h=t==null?void 0:t.patient)==null?void 0:h.name)||"-"),patientId:e(((g=t==null?void 0:t.patient)==null?void 0:g.patientId)||"-"),patientPhone:e(((f=t==null?void 0:t.patient)==null?void 0:f.phone)||"-"),doctorName:e(((y=t==null?void 0:t.doctor)==null?void 0:y.name)||(t==null?void 0:t.doctorName)||(($=t==null?void 0:t.doctor)==null?void 0:$.fullName)||"-"),diagnosisList:a,medicinesTableRows:n,labTestsList:d,clinicalNotes:e((t==null?void 0:t.clinicalNotes)||"-"),advice:e((t==null?void 0:t.advice)||"-"),followUpDate:e(v(t==null?void 0:t.followUpDate)),vitalsList:`<ul>${m}</ul>`}}function w(t){return`<!doctype html><html><head><meta charset="utf-8"><title>Bill ${t.billNo}</title><style>body{font-family:Arial,sans-serif;padding:24px;color:#1f2937}.h{display:flex;justify-content:space-between;align-items:flex-start;border-bottom:2px solid #111;padding-bottom:12px;margin-bottom:16px}.m{margin:6px 0}table{width:100%;border-collapse:collapse;margin-top:14px}th,td{border:1px solid #d1d5db;padding:8px}th{background:#f3f4f6;text-align:left}.right{text-align:right}.totals{margin-top:12px;margin-left:auto;max-width:360px}.totals .r{display:flex;justify-content:space-between;padding:3px 0}.totals .t{font-weight:700;border-top:1px solid #111;padding-top:8px}small{color:#6b7280}</style></head><body><div class="h"><div><h2 style="margin:0">${t.clinicName}</h2><div class="m">${t.clinicAddress}</div><div class="m">${t.clinicPhone}</div></div><div><div><strong>Bill:</strong> ${t.billNo}</div><div><strong>Date:</strong> ${t.billDate}</div><div><strong>Status:</strong> ${t.paymentStatus}</div></div></div><div><strong>Patient:</strong> ${t.patientName}<br><strong>Phone:</strong> ${t.patientPhone}<br><strong>Doctor:</strong> ${t.doctorName}</div><table><thead><tr><th>#</th><th>Description</th><th style="text-align:center">Qty</th><th class="right">Price</th><th class="right">Amount</th></tr></thead><tbody>${t.itemsTableRows}</tbody></table><div class="totals"><div class="r"><span>Subtotal</span><span>${t.subtotal}</span></div><div class="r"><span>Discount</span><span>${t.discount}</span></div><div class="r"><span>Tax</span><span>${t.tax}</span></div><div class="r t"><span>Total</span><span>${t.total}</span></div><div class="r"><span>Paid</span><span>${t.paid}</span></div><div class="r"><span>Due</span><span>${t.due}</span></div></div><p><small>${t.notes}</small></p></body></html>`}function I(t){return`<!doctype html><html><head><meta charset="utf-8"><title>Bill ${t.billNo}</title><style>body{font-family:Segoe UI,Arial,sans-serif;background:#f8fafc;padding:20px}.card{max-width:900px;margin:0 auto;background:#fff;border:1px solid #e2e8f0;border-radius:14px;overflow:hidden}.top{background:linear-gradient(135deg,#0ea5e9,#2563eb);color:#fff;padding:18px 22px;display:flex;justify-content:space-between}.body{padding:20px}.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}.box{background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:10px}table{width:100%;border-collapse:collapse;margin-top:14px}th,td{padding:10px;border-bottom:1px solid #e2e8f0}th{font-size:12px;text-transform:uppercase;color:#64748b;text-align:left}.r{text-align:right}</style></head><body><div class="card"><div class="top"><div><h2 style="margin:0">${t.clinicName}</h2><div>${t.clinicAddress}</div></div><div style="text-align:right"><div><strong>${t.billNo}</strong></div><div>${t.billDate}</div><div>${t.paymentStatus}</div></div></div><div class="body"><div class="grid"><div class="box"><strong>Patient</strong><div>${t.patientName}</div><div>${t.patientPhone}</div></div><div class="box"><strong>Doctor</strong><div>${t.doctorName}</div></div><div class="box"><strong>Contact</strong><div>${t.clinicPhone}</div></div></div><table><thead><tr><th>#</th><th>Description</th><th style="text-align:center">Qty</th><th class="r">Price</th><th class="r">Amount</th></tr></thead><tbody>${t.itemsTableRows}</tbody></table><div style="display:grid;grid-template-columns:1fr auto;gap:8px;margin-top:14px"><div></div><div><div>Subtotal: ${t.subtotal}</div><div>Discount: ${t.discount}</div><div>Tax: ${t.tax}</div><div style="font-weight:700">Total: ${t.total}</div><div>Paid: ${t.paid}</div><div>Due: ${t.due}</div></div></div></div></div></body></html>`}function S(t){return`<!doctype html><html><head><meta charset="utf-8"><title>Bill ${t.billNo}</title><style>body{font-family:Arial,sans-serif;font-size:12px;padding:12px}table{width:100%;border-collapse:collapse;margin-top:8px}th,td{border:1px solid #ccc;padding:6px}.r{text-align:right}</style></head><body><h3 style="margin:0">${t.clinicName}</h3><div>${t.clinicAddress} | ${t.clinicPhone}</div><hr><div>Bill ${t.billNo} | ${t.billDate} | ${t.paymentStatus}</div><div>Patient: ${t.patientName} (${t.patientPhone}) | Doctor: ${t.doctorName}</div><table><thead><tr><th>#</th><th>Description</th><th>Qty</th><th class="r">Price</th><th class="r">Amt</th></tr></thead><tbody>${t.itemsTableRows}</tbody></table><div style="text-align:right;margin-top:8px">Total ${t.total} | Paid ${t.paid} | Due ${t.due}</div></body></html>`}function L(t){return`<!doctype html><html><head><meta charset="utf-8"><title>Prescription ${t.prescriptionNo}</title><style>body{font-family:Segoe UI,Arial,sans-serif;background:#f8fafc;padding:18px;color:#0f172a}.card{max-width:900px;margin:0 auto;background:#fff;border:1px solid #e2e8f0;border-radius:14px;overflow:hidden}.top{background:linear-gradient(135deg,#2563eb,#1d4ed8);color:#fff;padding:16px 20px;display:flex;justify-content:space-between}.body{padding:20px}.sec{margin-bottom:14px}.sec h4{margin:0 0 8px 0;color:#1d4ed8}table{width:100%;border-collapse:collapse}th,td{padding:8px;border-bottom:1px solid #e2e8f0;text-align:left}th{font-size:12px;color:#64748b;text-transform:uppercase}</style></head><body><div class="card"><div class="top"><div><h2 style="margin:0">${t.clinicName}</h2><div>${t.clinicAddress}</div><div>${t.clinicPhone}</div></div><div style="text-align:right"><div><strong>${t.prescriptionNo}</strong></div><div>${t.prescriptionDate}</div></div></div><div class="body"><div class="sec"><strong>Patient:</strong> ${t.patientName} (${t.patientId}) | ${t.patientPhone}<br><strong>Doctor:</strong> ${t.doctorName}</div><div class="sec"><h4>Vitals</h4>${t.vitalsList}</div><div class="sec"><h4>Diagnosis</h4>${t.diagnosisList}</div><div class="sec"><h4>Medicines</h4><table><thead><tr><th>#</th><th>Medicine</th><th>Dosage</th><th>Frequency</th><th>Duration</th><th>Timing</th></tr></thead><tbody>${t.medicinesTableRows}</tbody></table></div><div class="sec"><h4>Lab Tests</h4>${t.labTestsList}</div><div class="sec"><h4>Clinical Notes</h4><div>${t.clinicalNotes}</div></div><div class="sec"><h4>Advice</h4><div>${t.advice}</div></div><div class="sec"><strong>Follow-up:</strong> ${t.followUpDate}</div></div></div></body></html>`}function C(t){return`<!doctype html><html><head><meta charset="utf-8"><title>Prescription ${t.prescriptionNo}</title><style>body{font-family:Arial,sans-serif;padding:20px}table{width:100%;border-collapse:collapse;margin-top:8px}th,td{border:1px solid #ddd;padding:7px}h3,h4{margin:8px 0}</style></head><body><h3>${t.clinicName}</h3><div>${t.clinicAddress} | ${t.clinicPhone}</div><hr><div><strong>Rx:</strong> ${t.prescriptionNo} | <strong>Date:</strong> ${t.prescriptionDate}</div><div><strong>Patient:</strong> ${t.patientName} (${t.patientId}) | ${t.patientPhone}</div><div><strong>Doctor:</strong> ${t.doctorName}</div><h4>Diagnosis</h4>${t.diagnosisList}<h4>Medicines</h4><table><thead><tr><th>#</th><th>Medicine</th><th>Dosage</th><th>Frequency</th><th>Duration</th><th>Timing</th></tr></thead><tbody>${t.medicinesTableRows}</tbody></table><h4>Lab Tests</h4>${t.labTestsList}<h4>Advice</h4><div>${t.advice}</div></body></html>`}function M(t){return`<!doctype html><html><head><meta charset="utf-8"><title>Prescription ${t.prescriptionNo}</title><style>body{font-family:Arial,sans-serif;font-size:12px;padding:12px}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ccc;padding:6px}</style></head><body><strong>${t.clinicName}</strong><br>${t.prescriptionNo} | ${t.prescriptionDate}<hr>Patient: ${t.patientName} (${t.patientId})<br>Doctor: ${t.doctorName}<br><br>Medicines:<table><thead><tr><th>#</th><th>Medicine</th><th>Dose</th><th>Freq</th><th>Duration</th><th>Timing</th></tr></thead><tbody>${t.medicinesTableRows}</tbody></table><div style="margin-top:8px">Advice: ${t.advice}</div></body></html>`}function H(t,s,r){const n=x(r),o=D(t,s);if(n.billTemplateId==="custom"&&n.customBillHtml){const a=N(n.customBillHtml);return P(T(a,o),`Bill ${o.billNo}`)}return n.billTemplateId==="modern"?I(o):n.billTemplateId==="compact"?S(o):w(o)}function E(t,s,r){const n=x(r),o=A(t,s);if(n.prescriptionTemplateId==="custom"&&n.customPrescriptionHtml){const a=N(n.customPrescriptionHtml);return P(T(a,o),`Prescription ${o.prescriptionNo}`)}return n.prescriptionTemplateId==="classic"?C(o):n.prescriptionTemplateId==="compact"?M(o):L(o)}const j={bill:["{{clinicName}}","{{clinicPhone}}","{{clinicAddress}}","{{billNo}}","{{billDate}}","{{patientName}}","{{patientPhone}}","{{doctorName}}","{{paymentStatus}}","{{itemsTableRows}}","{{subtotal}}","{{discount}}","{{tax}}","{{total}}","{{paid}}","{{due}}","{{notes}}"],prescription:["{{clinicName}}","{{clinicPhone}}","{{clinicAddress}}","{{prescriptionNo}}","{{prescriptionDate}}","{{patientName}}","{{patientId}}","{{patientPhone}}","{{doctorName}}","{{vitalsList}}","{{diagnosisList}}","{{medicinesTableRows}}","{{labTestsList}}","{{clinicalNotes}}","{{advice}}","{{followUpDate}}"]};export{R as B,B as P,H as a,j as b,x as n,E as r};
