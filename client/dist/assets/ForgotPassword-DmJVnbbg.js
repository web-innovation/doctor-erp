import{r as p,b as N,j as e,L as l,F as y,n as v,e as w,o as F,l as x,f as k,z as u}from"./index-BKdfnJ0H.js";import{u as E}from"./useMutation-C5UsUZj5.js";console.log("hi");function L(){var i,o,c;const[r,g]=p.useState(!1),{register:h,handleSubmit:b,getValues:n,formState:{errors:a}}=N({defaultValues:{email:""}}),s=E({mutationFn:k.forgotPassword,onSuccess:()=>{g(!0),u.success("Reset link sent to your email")},onError:t=>{var d,m;u.error(((m=(d=t.response)==null?void 0:d.data)==null?void 0:m.message)||"Failed to send reset link")}}),f=t=>{s.mutate(t)},j=()=>{const t=n("email");s.mutate({email:t})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs(l,{to:"/",className:"inline-flex items-center space-x-2",children:[e.jsx(y,{className:"h-10 w-10 text-blue-600"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"Docsy ERP"})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[r?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(F,{className:"text-3xl text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Check Your Email"}),e.jsxs("p",{className:"text-gray-500 mb-6",children:["We've sent a password reset link to"," ",e.jsx("span",{className:"font-medium text-gray-700",children:n("email")})]}),e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-blue-700",children:["Didn't receive the email? Check your spam folder or"," ",e.jsx("button",{onClick:j,disabled:s.isPending,className:"font-semibold underline hover:no-underline disabled:opacity-50",children:"click here to resend"})]})}),e.jsxs(l,{to:"/login",className:"inline-flex items-center text-blue-600 font-semibold hover:text-blue-700",children:[e.jsx(x,{className:"mr-2"}),"Back to Login"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{className:"text-2xl text-blue-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"No worries! Enter your email and we'll send you a reset link."})]}),e.jsxs("form",{onSubmit:b(f),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",...h("email",{required:"Email is required",pattern:{value:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Enter a valid email address"}}),className:`w-full px-4 py-3 rounded-lg border ${a.email?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"} focus:outline-none focus:ring-2 transition`,placeholder:"doctor@clinic.com"}),a.email&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.email.message})]}),s.isError&&e.jsx("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-lg text-sm",children:((c=(o=(i=s.error)==null?void 0:i.response)==null?void 0:o.data)==null?void 0:c.message)||"Failed to send reset link. Please try again."}),e.jsx("button",{type:"submit",disabled:s.isPending,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:s.isPending?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"animate-spin mr-2"}),"Sending..."]}):"Send Reset Link"})]})]}),!r&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(l,{to:"/login",className:"inline-flex items-center text-gray-600 hover:text-blue-600 transition",children:[e.jsx(x,{className:"mr-2"}),"Back to Login"]})})]}),e.jsxs("p",{className:"text-center text-gray-400 text-sm mt-8",children:["Â© ",new Date().getFullYear()," Docsy ERP. All rights reserved."]})]})})}export{L as default};
