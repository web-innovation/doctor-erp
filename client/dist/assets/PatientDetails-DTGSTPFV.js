import{T as me,u as xe,U as ue,I as pe,r as N,b as ge,p as A,J as _,j as e,e as J,l as be,V as he,W as ye,n as Ne,X as fe,Y as X,L as P,x as te,g as je,Z as ve,v as we,w as Pe,_ as Oe,$ as Be,y as Z,Q as Ae,z as C,G as O}from"./index-adke7x0a.js";import{u as ee}from"./useMutation-lnV0fZGx.js";import{p as Ce}from"./prescriptionService-Dh_4XLSu.js";const se=a=>{if(!a||typeof a!="string")return"";const o=a.trim(),x=/^(\d{2})\/(\d{2})\/(\d{4})$/.exec(o);if(!x)return"";const[,c,i,F]=x,g=Number(c),d=Number(i),f=Number(F);if(!g||!d||!f||d<1||d>12||g<1||g>31)return"";const j=new Date(f,d-1,g);return j.getFullYear()!==f||j.getMonth()!==d-1||j.getDate()!==g?"":`${F}-${i}-${c}`},Fe=a=>{if(!a||typeof a!="string"||!a.includes("-"))return"";const[o,x,c]=a.split("T")[0].split("-");return!o||!x||!c?"":`${c}/${x}/${o}`},Se=[{id:"overview",label:"Overview",icon:je},{id:"history",label:"History",icon:ve},{id:"prescriptions",label:"Prescriptions",icon:te},{id:"bills",label:"Bills",icon:we},{id:"vitals",label:"Vitals",icon:Pe}];function $e(){var U,z;const{id:a}=me(),o=xe(),x=ue(),c=pe(),[i,F]=N.useState("overview"),[g,d]=N.useState(!1),[f,j]=N.useState(!1),[l,m]=N.useState({bloodPressure:"",pulse:"",temperature:"",weight:"",height:"",spO2:"",bloodSugar:"",notes:""}),{register:n,handleSubmit:re,reset:q,setValue:T,watch:ae,formState:{errors:S}}=ge();N.useEffect(()=>{x.pathname.endsWith("/edit")&&d(!0)},[x.pathname]);const{data:r,isLoading:le,isError:ie}=A({queryKey:["patient",a],queryFn:()=>O.getPatient(a),enabled:!!a});N.useEffect(()=>{r&&q({name:r.name||"",phone:r.phone||"",email:r.email||"",gender:r.gender?String(r.gender).toUpperCase():"",dateOfBirth:r.dateOfBirth?Fe(r.dateOfBirth):"",age:r.age||"",bloodGroup:r.bloodGroup||"",address:r.address||"",city:r.city||"",emergencyContact:r.emergencyContact||"",allergies:r.allergies&&Array.isArray(r.allergies)?r.allergies.join(", "):"",medicalHistory:r.medicalHistory&&Array.isArray(r.medicalHistory)?r.medicalHistory.join(`
`):"",insurance:r.insurance||""})},[r,q]);const I=ae("dateOfBirth");N.useEffect(()=>{if(!I)return;const s=R(I);typeof s=="number"&&!Number.isNaN(s)&&T("age",s,{shouldValidate:!0,shouldDirty:!0})},[I,T]);const{data:M}=A({queryKey:["patientPrescriptions",a],queryFn:()=>Ce.getByPatientId(a),enabled:!!a&&i==="prescriptions"}),{data:u}=A({queryKey:["patientVitals",a],queryFn:()=>O.getVitals(a),enabled:!!a&&i==="vitals"}),{data:D}=A({queryKey:["patientBills",a],queryFn:()=>O.getBills(a),enabled:!!a&&i==="bills"}),{data:E}=A({queryKey:["patientHistory",a],queryFn:()=>O.getHistory(a),enabled:!!a&&i==="history"}),ne=_("prescriptions:create",["DOCTOR","ADMIN","SUPER_ADMIN"]),de=_("appointments:create",["DOCTOR","SUPER_ADMIN","RECEPTIONIST"]),$=ee({mutationFn:s=>O.addVitals(a,s),onSuccess:()=>{c.invalidateQueries({queryKey:["patientVitals",a]}),C.success("Vitals added successfully")},onError:()=>{C.error("Failed to add vitals")}}),H=ee({mutationFn:s=>O.updatePatient(a,s),onSuccess:()=>{c.invalidateQueries({queryKey:["patient",a]}),c.invalidateQueries({queryKey:["patients"]}),C.success("Patient updated successfully"),d(!1),o(`/patients/${a}`)},onError:s=>{var t,p;C.error(((p=(t=s.response)==null?void 0:t.data)==null?void 0:p.message)||"Failed to update patient")}}),G=()=>{d(!1),o(`/patients/${a}`)},oe=s=>{const t=s.dateOfBirth?se(s.dateOfBirth):"";if(s.dateOfBirth&&!t){C.error("Date of birth format should be dd/mm/yyyy");return}const p=s.allergies?s.allergies.split(",").map(w=>w.trim()).filter(Boolean):void 0,B=s.medicalHistory?s.medicalHistory.split(`
`).map(w=>w.trim()).filter(Boolean):void 0;H.mutate({...s,dateOfBirth:t||void 0,allergies:p,medicalHistory:B,insurance:s.insurance?s.insurance.trim():null})},v=s=>s?new Date(s).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",R=s=>{if(!s)return"-";const t=s.includes("/")?se(s):s;if(!t)return"-";const p=new Date,B=new Date(t);let w=p.getFullYear()-B.getFullYear();const W=p.getMonth()-B.getMonth();return(W<0||W===0&&p.getDate()<B.getDate())&&w--,w},k=s=>u!=null&&u.length?u.find(t=>t[s]!==null&&t[s]!==void 0&&t[s]!==""):null,V=(s,t)=>t==null||t===""?{label:"No data",className:"bg-gray-100 text-gray-600"}:s==="spO2"?Number(t)>=95?{label:"Normal",className:"bg-green-100 text-green-700"}:Number(t)>=90?{label:"Low",className:"bg-yellow-100 text-yellow-700"}:{label:"Critical",className:"bg-red-100 text-red-700"}:s==="pulse"?Number(t)>=60&&Number(t)<=100?{label:"Normal",className:"bg-green-100 text-green-700"}:{label:"Review",className:"bg-yellow-100 text-yellow-700"}:s==="temperature"?Number(t)>=97&&Number(t)<=99?{label:"Normal",className:"bg-green-100 text-green-700"}:Number(t)>99?{label:"Fever",className:"bg-red-100 text-red-700"}:{label:"Low",className:"bg-yellow-100 text-yellow-700"}:{label:"Recorded",className:"bg-blue-100 text-blue-700"},ce=()=>{const s={bloodPressure:l.bloodPressure||null,pulse:l.pulse?Number(l.pulse):null,temperature:l.temperature?Number(l.temperature):null,weight:l.weight?Number(l.weight):null,height:l.height?Number(l.height):null,spO2:l.spO2?Number(l.spO2):null,bloodSugar:l.bloodSugar?Number(l.bloodSugar):null,notes:l.notes||null};$.mutate(s,{onSuccess:()=>{m({bloodPressure:"",pulse:"",temperature:"",weight:"",height:"",spO2:"",bloodSugar:"",notes:""}),j(!1)}})},b=k("pulse"),h=k("spO2"),y=k("temperature"),L=k("bloodPressure"),Y=V("pulse",b==null?void 0:b.pulse),K=V("spO2",h==null?void 0:h.spO2),Q=V("temperature",y==null?void 0:y.temperature);return le?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(J,{className:"animate-spin text-4xl text-blue-600"})}):ie||!r?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 mb-4",children:"Failed to load patient details"}),e.jsx("button",{onClick:()=>o("/patients"),className:"text-blue-600 hover:underline",children:"Back to Patients"})]})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>o("/patients"),className:"p-2 hover:bg-gray-100 rounded-lg transition",children:e.jsx(be,{className:"text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Patient Details"}),e.jsxs("p",{className:"text-gray-500",children:["ID: ",r.patientId||`P${String(r.id).padStart(5,"0")}`]})]}),e.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2.5 rounded-lg font-medium hover:bg-blue-700 transition",children:[e.jsx(he,{}),"Edit Patient"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.photo?e.jsx("img",{src:r.photo,alt:r.name,className:"w-24 h-24 rounded-full object-cover"}):e.jsx("span",{className:"text-3xl font-bold text-blue-600",children:((U=r.name)==null?void 0:U.charAt(0))||"P"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r.name}),e.jsxs("p",{className:"text-gray-500",children:[r.age||R(r.dateOfBirth)," years • ",r.gender||"N/A"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(ye,{className:"text-blue-500"}),e.jsx("span",{children:r.phone||"No phone"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(Ne,{className:"text-blue-500"}),e.jsx("span",{children:r.email||"No email"})]}),e.jsxs("div",{className:"flex items-start gap-3 text-gray-600",children:[e.jsx(fe,{className:"text-blue-500 mt-1"}),e.jsx("span",{children:r.address||"No address"})]}),e.jsxs("div",{className:"flex items-center gap-3 text-gray-600",children:[e.jsx(X,{className:"text-blue-500"}),e.jsxs("span",{children:["Registered: ",v(r.createdAt)]})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-100 space-y-3",children:[ne&&e.jsxs(P,{to:`/prescriptions/new?patientId=${a}`,className:"w-full inline-flex items-center justify-center gap-2 bg-green-600 text-white py-2.5 rounded-lg font-medium hover:bg-green-700 transition",children:[e.jsx(te,{}),"New Prescription"]}),de&&e.jsxs(P,{to:`/appointments/new?patientId=${a}`,className:"w-full inline-flex items-center justify-center gap-2 border border-blue-600 text-blue-600 py-2.5 rounded-lg font-medium hover:bg-blue-50 transition",children:[e.jsx(X,{}),"Book Appointment"]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-6",children:e.jsx("div",{className:"flex overflow-x-auto",children:Se.map(s=>e.jsxs("button",{onClick:()=>F(s.id),className:`flex items-center gap-2 px-6 py-4 font-medium whitespace-nowrap transition border-b-2 ${i===s.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(s.icon,{}),s.label]},s.id))})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[i==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Blood Group"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.bloodGroup||"Not recorded"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Date of Birth"}),e.jsx("p",{className:"font-medium text-gray-900",children:v(r.dateOfBirth)})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Emergency Contact"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.emergencyContact||"Not recorded"})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Insurance"}),e.jsx("p",{className:"font-medium text-gray-900",children:r.insurance||"Not recorded"})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Oe,{className:"text-red-500"}),"Allergies"]})}),r.allergies&&r.allergies.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:r.allergies.map((s,t)=>e.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm",children:s},t))}):e.jsx("p",{className:"text-gray-500",children:"No known allergies"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Medical History"}),r.medicalHistory&&r.medicalHistory.length>0?e.jsx("ul",{className:"space-y-2",children:r.medicalHistory.map((s,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Be,{className:"text-blue-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:s})]},t))}):e.jsx("p",{className:"text-gray-500",children:"No medical history recorded"})]})]}),i==="history"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Visit History"}),((z=E==null?void 0:E.appointments)==null?void 0:z.length)>0?e.jsx("div",{className:"space-y-4",children:E.appointments.map((s,t)=>e.jsxs(P,{to:`/appointments/${s.id}`,className:"block p-4 border border-gray-100 rounded-lg hover:bg-gray-50 transition",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.reason||"General Checkup"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.status==="COMPLETED"?"bg-green-100 text-green-700":s.status==="CANCELLED"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:s.status})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:v(s.date)}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:s.notes||"No notes"})]},s.id||t))}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No visit history available"})]}),i==="prescriptions"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Prescriptions"}),e.jsxs(P,{to:`/prescriptions/new?patientId=${a}`,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx(Z,{}),"New Prescription"]})]}),(M==null?void 0:M.length)>0?e.jsx("div",{className:"space-y-4",children:M.map(s=>{var t;return e.jsxs(P,{to:`/prescriptions/${s.id}`,className:"block p-4 border border-gray-100 rounded-lg hover:bg-gray-50 transition",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.diagnosis||"Prescription"}),e.jsx("span",{className:"text-sm text-gray-500",children:v(s.date)})]}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[((t=s.medicines)==null?void 0:t.length)||0," medicines prescribed"]}),e.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:["Dr. ",s.doctor||"N/A"]})]},s.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No prescriptions yet"})]}),i==="bills"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bills & Invoices"}),(D==null?void 0:D.length)>0?e.jsx("div",{className:"space-y-4",children:D.map(s=>{var t;return e.jsxs(P,{to:`/billing/${s.id}`,className:"block p-4 border border-gray-100 rounded-lg hover:bg-gray-50 transition",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["Invoice #",s.billNo]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${s.paymentStatus==="PAID"?"bg-green-100 text-green-700":s.paymentStatus==="PARTIAL"?"bg-blue-100 text-blue-700":"bg-yellow-100 text-yellow-700"}`,children:s.paymentStatus})]}),e.jsx("p",{className:"text-gray-600 text-sm",children:v(s.date)}),e.jsxs("p",{className:"font-semibold text-gray-900 mt-2",children:["₹",((t=s.totalAmount)==null?void 0:t.toLocaleString())||0]})]},s.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No bills generated"})]}),i==="vitals"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Vitals Record"}),e.jsxs("button",{onClick:()=>j(s=>!s),disabled:$.isPending,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition disabled:opacity-50",children:[e.jsx(Z,{}),f?"Close Form":"Add Vitals"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-4",children:[e.jsxs("div",{className:"rounded-lg border border-gray-200 p-3 bg-white",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Latest BP"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(L==null?void 0:L.bloodPressure)||"-"})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-3 bg-white",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Latest Pulse"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:b!=null&&b.pulse?`${b.pulse} bpm`:"-"}),e.jsx("span",{className:`inline-flex mt-1 px-2 py-0.5 rounded-full text-xs ${Y.className}`,children:Y.label})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-3 bg-white",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Latest Temperature"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:y!=null&&y.temperature?`${y.temperature} F`:"-"}),e.jsx("span",{className:`inline-flex mt-1 px-2 py-0.5 rounded-full text-xs ${Q.className}`,children:Q.label})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200 p-3 bg-white",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Latest SpO2"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:h!=null&&h.spO2?`${h.spO2}%`:"-"}),e.jsx("span",{className:`inline-flex mt-1 px-2 py-0.5 rounded-full text-xs ${K.className}`,children:K.label})]})]}),f&&e.jsxs("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4 mb-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Vitals help track trends between visits and flag issues early."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",placeholder:"BP (e.g. 120/80)",value:l.bloodPressure,onChange:s=>m(t=>({...t,bloodPressure:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",inputMode:"numeric",placeholder:"Pulse",value:l.pulse,onChange:s=>m(t=>({...t,pulse:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",inputMode:"decimal",placeholder:"Temperature (F)",value:l.temperature,onChange:s=>m(t=>({...t,temperature:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",inputMode:"numeric",placeholder:"SpO2 (%)",value:l.spO2,onChange:s=>m(t=>({...t,spO2:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",inputMode:"decimal",placeholder:"Weight (kg)",value:l.weight,onChange:s=>m(t=>({...t,weight:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",inputMode:"decimal",placeholder:"Height (cm)",value:l.height,onChange:s=>m(t=>({...t,height:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsx("input",{type:"text",inputMode:"decimal",placeholder:"Blood Sugar (optional)",value:l.bloodSugar,onChange:s=>m(t=>({...t,bloodSugar:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg md:col-span-2"}),e.jsx("textarea",{placeholder:"Notes (optional)",value:l.notes,onChange:s=>m(t=>({...t,notes:s.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg md:col-span-4 resize-none"})]}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsxs("button",{type:"button",onClick:ce,disabled:$.isPending,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition disabled:opacity-50",children:[$.isPending?e.jsx(J,{className:"animate-spin"}):null,"Save Vitals"]})})]}),(u==null?void 0:u.length)>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:"Date"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:"BP"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:"Pulse"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:"Temp"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:"Weight"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:"Height"}),e.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-600",children:"SpO2"})]})}),e.jsx("tbody",{children:u.map((s,t)=>e.jsxs("tr",{className:"border-b border-gray-50",children:[e.jsx("td",{className:"py-3 px-4 text-gray-900",children:v(s.recordedAt)}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:s.bloodPressure||"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:s.pulse?`${s.pulse} bpm`:"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:s.temperature?`${s.temperature} F`:"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:s.weight?`${s.weight} kg`:"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:s.height?`${s.height} cm`:"-"}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:s.spO2?`${s.spO2}%`:"-"})]},s.id||t))})]})}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No vitals recorded"})]})]})]})]})]}),e.jsx(Ae,{isOpen:g,onClose:G,title:"Edit Patient",size:"lg",children:e.jsxs("form",{onSubmit:re(oe),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Patient Name *"}),e.jsx("input",{type:"text",...n("name",{required:"Name is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),S.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",...n("phone",{required:"Phone is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),S.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:S.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",...n("email"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),e.jsxs("select",{...n("gender"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"MALE",children:"Male"}),e.jsx("option",{value:"FEMALE",children:"Female"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"text",inputMode:"numeric",...n("dateOfBirth"),placeholder:"dd/mm/yyyy",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Allergies (comma separated)"}),e.jsx("input",{type:"text",...n("allergies"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g. Penicillin, Pollen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Insurance"}),e.jsx("input",{type:"text",...n("insurance"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Insurance provider / policy"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Medical History (one per line)"}),e.jsx("textarea",{...n("medicalHistory"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe medical history entries, one per line"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Blood Group"}),e.jsxs("select",{...n("bloodGroup"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select Blood Group"}),e.jsx("option",{value:"A+",children:"A+"}),e.jsx("option",{value:"A-",children:"A-"}),e.jsx("option",{value:"B+",children:"B+"}),e.jsx("option",{value:"B-",children:"B-"}),e.jsx("option",{value:"AB+",children:"AB+"}),e.jsx("option",{value:"AB-",children:"AB-"}),e.jsx("option",{value:"O+",children:"O+"}),e.jsx("option",{value:"O-",children:"O-"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",...n("city"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("textarea",{...n("address"),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Emergency Contact"}),e.jsx("input",{type:"text",...n("emergencyContact"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:H.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:H.isPending?"Saving...":"Save Changes"})]})]})})]})}export{$e as default};
