import{I as Je,U as Xe,aa as Y,aD as Z,ay as pe,r as o,b as G,p as J,J as O,j as e,y as Ye,K as Ze,O as es,P as ss,Q as X,z as g,an as f,W as xe,n as ue,X as ge,L as ts,V as as,ae as ns,k as rs}from"./index-BZojoe5g.js";import{u as q}from"./useMutation-CsgJd_y7.js";const U=[{id:"labs",label:"Labs",icon:Y},{id:"agents",label:"Agents",icon:Z},{id:"commissions",label:"Commissions",icon:pe}];function ds(){var ae,ne,re,le,ie,oe,de;const S=Je(),p=Xe(),b=p.pathname==="/labs"||p.pathname.startsWith("/labs/")?U.filter(s=>s.id==="labs"):U.filter(s=>s.id!=="labs"),ee=new URLSearchParams(p.search),se=ee.get("tab"),be=b.some(s=>s.id===se)?se:b[0].id,[t,Q]=o.useState(be);o.useEffect(()=>{b.find(s=>s.id===t)||Q(b[0].id)},[t,b]),o.useEffect(()=>{const s=ee.get("tab"),a=p.pathname==="/labs"||p.pathname.startsWith("/labs/")?U.filter(h=>h.id==="labs"):U.filter(h=>h.id!=="labs"),n=a.some(h=>h.id===s)?s:a[0].id;n!==t&&(Q(n),y(1),D(""))},[p.pathname,p.search]);const[P,D]=o.useState(""),[i,y]=o.useState(1),[F,he]=o.useState("all"),[fe,M]=o.useState(!1),[ye,E]=o.useState(!1),[je,R]=o.useState(!1),[m,x]=o.useState(null),u=10,{register:j,handleSubmit:Ne,reset:V,formState:{errors:L}}=G(),{register:N,handleSubmit:ve,reset:z,setValue:v,formState:{errors:T}}=G(),{register:I,handleSubmit:Ae,reset:_}=G(),{data:r,isLoading:we}=J({queryKey:["labs",i,u,P],queryFn:()=>f.getLabs({page:i,limit:u,search:P}),enabled:t==="labs"}),{data:l,isLoading:Pe}=J({queryKey:["agents",i,u,P],queryFn:()=>f.getAgents({page:i,limit:u,search:P}),enabled:t==="agents"}),{data:d,isLoading:Ce}=J({queryKey:["commissions",i,u,F],queryFn:()=>f.getCommissions({page:i,limit:u,status:F==="all"?void 0:F}),enabled:t==="commissions"}),C=(r==null?void 0:r.data)||[],k=(l==null?void 0:l.data)||[],A=(d==null?void 0:d.data)||[],$=t==="labs"?((ae=r==null?void 0:r.pagination)==null?void 0:ae.totalPages)||1:t==="agents"?((ne=l==null?void 0:l.pagination)==null?void 0:ne.totalPages)||1:((re=d==null?void 0:d.pagination)==null?void 0:re.totalPages)||1,te=t==="labs"?((le=r==null?void 0:r.pagination)==null?void 0:le.total)||0:t==="agents"?((ie=l==null?void 0:l.pagination)==null?void 0:ie.total)||0:((oe=d==null?void 0:d.pagination)==null?void 0:oe.total)||0,w=o.useMemo(()=>{var ce,me;const s=((ce=r==null?void 0:r.pagination)==null?void 0:ce.total)||0,a=C.filter(c=>c.isActive!==!1).length,n=((me=l==null?void 0:l.pagination)==null?void 0:me.total)||0,h=k.filter(c=>c.isActive!==!1).length,We=A.filter(c=>(c.status||"").toUpperCase()!=="PAID").length,Be=A.filter(c=>(c.status||"").toUpperCase()!=="PAID").reduce((c,Ge)=>c+Number(Ge.amount||0),0);return{totalLabs:s,activeLabsOnPage:a,totalAgents:n,activeAgentsOnPage:h,pendingCount:We,pendingAmount:Be}},[C,k,A,r,l]),H=q({mutationFn:s=>f.createAgent(s),onSuccess:()=>{g.success("Agent added successfully"),S.invalidateQueries(["agents"]),M(!1),V()},onError:s=>{var a,n;g.error(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to add agent")}}),K=q({mutationFn:({id:s,data:a})=>f.updateAgent(s,a),onSuccess:()=>{g.success("Agent updated successfully"),S.invalidateQueries(["agents"]),E(!1),x(null),z()},onError:s=>{var a,n;g.error(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update agent")}}),ke=q({mutationFn:s=>f.deleteAgent(s),onSuccess:()=>{g.success("Agent deleted successfully"),S.invalidateQueries(["agents"])},onError:s=>{var a,n;g.error(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to delete agent")}}),W=q({mutationFn:({id:s,data:a})=>f.markCommissionPaid(s,a),onSuccess:()=>{g.success("Commission marked as paid"),S.invalidateQueries(["commissions"]),R(!1),x(null),_()},onError:s=>{var a,n;g.error(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to process payment")}}),Se=s=>{D(s.target.value),y(1)},Fe=s=>{Q(s),y(1),D("")},Me=s=>{H.mutate({name:s.name,address:s.address,phone:s.phone,email:s.email,commissionType:"PERCENTAGE",commissionValue:s.commissionRate?parseFloat(s.commissionRate):0,discountAllowed:s.discountAllowed?parseFloat(s.discountAllowed):0})},Ee=s=>{m&&K.mutate({id:m.id,data:{name:s.name,address:s.address,phone:s.phone,email:s.email,commissionValue:s.commissionRate?parseFloat(s.commissionRate):void 0,discountAllowed:s.discountAllowed?parseFloat(s.discountAllowed):void 0}})},Re=s=>{m&&W.mutate({id:m.id,data:{paymentMethod:s.paymentMethod,paymentReference:s.paymentReference,paymentDate:s.paymentDate,notes:s.notes}})},Le=s=>{x(s),v("name",s.name),v("email",s.email),v("phone",s.phone),v("address",s.address),v("commissionRate",s.commissionRate||s.commissionValue),v("discountAllowed",s.discountAllowed||0),E(!0)},Te=s=>{x(s),R(!0)},Ie=s=>{window.confirm(`Are you sure you want to delete "${s.name}"?`)&&ke.mutate(s.id)},B=s=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(s||0),Oe=s=>s?new Date(s).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"-",qe=we||Pe||Ce,Ue=O("agents:create",["SUPER_ADMIN","DOCTOR"]),Qe=O("agents:update",["SUPER_ADMIN","DOCTOR"]),De=O("agents:manage",["SUPER_ADMIN","DOCTOR"]),Ve=O("commissions:pay",["SUPER_ADMIN","ACCOUNTANT"]),ze=()=>e.jsx("div",{className:"grid gap-4",children:C.map(s=>e.jsx("div",{className:"bg-white border border-gray-100 rounded-xl p-5 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-sky-100 text-sky-700 flex items-center justify-center",children:e.jsx(Y,{})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-600 flex flex-wrap gap-4 mt-1",children:[e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(xe,{})," ",s.phone||"-"]}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(ue,{})," ",s.email||"-"]}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(ge,{})," ",s.address||"-"]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsxs("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-emerald-100 text-emerald-700",children:["Commission: ",s.commissionValue||0,"%"]}),e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${s.isActive!==!1?"bg-blue-100 text-blue-700":"bg-rose-100 text-rose-700"}`,children:s.isActive!==!1?"Active":"Inactive"})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ts,{to:`/labs-agents/${s.id}/tests`,className:"px-3 py-2 text-sm rounded-lg border border-sky-200 text-sky-700 hover:bg-sky-50",children:"Manage Tests"})})]})},s.id))}),_e=()=>e.jsx("div",{className:"grid gap-4",children:k.map(s=>e.jsx("div",{className:"bg-white border border-gray-100 rounded-xl p-5 shadow-sm",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-amber-100 text-amber-700 flex items-center justify-center",children:e.jsx(Z,{})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"text-sm text-gray-600 flex flex-wrap gap-4 mt-1",children:[e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(xe,{})," ",s.phone||"-"]}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(ue,{})," ",s.email||"-"]}),e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(ge,{})," ",s.address||"-"]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsxs("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-emerald-100 text-emerald-700",children:["Commission: ",s.commissionRate||s.commissionValue||0,"%"]}),e.jsxs("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-slate-100 text-slate-700",children:["Discount Allowed: ",s.discountAllowed||0,"%"]}),e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${s.isActive!==!1?"bg-blue-100 text-blue-700":"bg-rose-100 text-rose-700"}`,children:s.isActive!==!1?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Qe&&e.jsxs("button",{onClick:()=>Le(s),className:"px-3 py-2 text-sm rounded-lg border border-blue-200 text-blue-600 hover:bg-blue-50",children:[e.jsx(as,{className:"inline-block mr-2"})," Edit"]}),De&&e.jsxs("button",{onClick:()=>Ie(s),className:"px-3 py-2 text-sm rounded-lg border border-rose-200 text-rose-600 hover:bg-rose-50",children:[e.jsx(ns,{className:"inline-block mr-2"})," Remove"]})]})]})},s.id))}),$e=()=>e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Agent"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:A.map(s=>{var a;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:((a=s.agent)==null?void 0:a.name)||s.partnerName||"Agent"}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Ref: ",s.reference||s.refNo||"-"]})]}),e.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900",children:B(s.amount)}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:Oe(s.createdAt)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${(s.status||"").toUpperCase()==="PAID"?"bg-emerald-100 text-emerald-700":"bg-amber-100 text-amber-700"}`,children:(s.status||"PENDING").toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 text-right",children:Ve&&(s.status||"").toUpperCase()!=="PAID"&&e.jsxs("button",{onClick:()=>Te(s),className:"inline-flex items-center gap-2 px-3 py-2 bg-emerald-600 text-white rounded-lg text-sm hover:bg-emerald-700",children:[e.jsx(rs,{})," Mark Paid"]})})]},s.id)})})]})}),He=t==="labs"?"Labs":"Agents & Commissions",Ke=t==="labs"?"Manage referral labs and open their test catalog from here.":"Hire agents on commission to bring patients to your clinic. Track payouts in one place.";return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-50 via-white to-blue-50 border border-gray-100 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:He}),e.jsx("p",{className:"text-gray-600 mt-1",children:Ke})]}),t==="agents"&&Ue&&e.jsxs("button",{onClick:()=>M(!0),className:"inline-flex items-center justify-center gap-2 bg-amber-600 text-white px-4 py-2.5 rounded-lg font-medium hover:bg-amber-700",children:[e.jsx(Ye,{})," Add Agent"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:t==="labs"?"Total Labs":"Total Agents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t==="labs"?w.totalLabs:w.totalAgents})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Active (Page)"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t==="labs"?w.activeLabsOnPage:w.activeAgentsOnPage})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Pending Commissions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:w.pendingCount})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-100 p-4",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Pending Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:B(w.pendingAmount)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-6",children:[b.length>1&&e.jsx("div",{className:"flex border-b border-gray-100",children:b.map(s=>e.jsxs("button",{onClick:()=>Fe(s.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 text-sm font-medium transition ${t===s.id?"text-amber-700 border-b-2 border-amber-600 bg-amber-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(s.icon,{}),s.label]},s.id))}),(t==="agents"||t==="labs")&&e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",value:P,onChange:Se,placeholder:t==="labs"?"Search labs by name or contact person...":"Search agents by name or phone...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"})]})}),t==="commissions"&&e.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Track commission payouts for patient referrals."}),e.jsxs("select",{value:F,onChange:s=>{he(s.target.value),y(1)},className:"px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"paid",children:"Paid"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[qe?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"})}):t==="labs"?C.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[e.jsx(Y,{className:"text-4xl mb-3"}),e.jsx("p",{className:"font-medium",children:"No labs yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Lab records will appear here once created."})]}):ze():t==="agents"?k.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[e.jsx(Z,{className:"text-4xl mb-3"}),e.jsx("p",{className:"font-medium",children:"No agents yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Add your first agent to start tracking referrals."})]}):_e():A.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500",children:[e.jsx(pe,{className:"text-4xl mb-3"}),e.jsx("p",{className:"font-medium",children:"No commissions yet"}),e.jsx("p",{className:"text-sm mt-1",children:"Commission records will appear here when created."})]}):$e(),(t==="labs"?C.length:t==="agents"?k.length:A.length)>0&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-100",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Showing ",(i-1)*u+1," to"," ",Math.min(i*u,te)," of ",te," items"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(s=>Math.max(1,s-1)),disabled:i===1,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(es,{className:"text-gray-600"})}),e.jsxs("span",{className:"px-4 py-2 text-sm text-gray-600",children:["Page ",i," of ",$]}),e.jsx("button",{onClick:()=>y(s=>Math.min($,s+1)),disabled:i===$,className:"p-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(ss,{className:"text-gray-600"})})]})]})]}),e.jsx(X,{isOpen:fe,onClose:()=>{M(!1),V()},title:"Add Agent",size:"lg",children:e.jsxs("form",{onSubmit:Ne(Me),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...j("name",{required:"Name is required"}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Agent name"}),L.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:L.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",...j("email"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Email"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",...j("phone",{required:"Phone is required"}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Phone number"}),L.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:L.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission Rate (%)"}),e.jsx("input",{type:"number",step:"0.1",...j("commissionRate"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"10"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Allowed (%)"}),e.jsx("input",{type:"number",step:"0.1",...j("discountAllowed"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"0"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("textarea",{...j("address"),rows:2,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Address"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{M(!1),V()},className:"px-4 py-2.5 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:H.isPending,className:"px-4 py-2.5 bg-amber-600 text-white rounded-lg font-medium hover:bg-amber-700 disabled:opacity-50",children:H.isPending?"Adding...":"Add Agent"})]})]})}),e.jsx(X,{isOpen:ye,onClose:()=>{E(!1),x(null),z()},title:"Edit Agent",size:"lg",children:e.jsxs("form",{onSubmit:ve(Ee),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",...N("name",{required:"Name is required"}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"}),T.name&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:T.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",...N("email"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",...N("phone",{required:"Phone is required"}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"}),T.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:T.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commission Rate (%)"}),e.jsx("input",{type:"number",step:"0.1",...N("commissionRate"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Allowed (%)"}),e.jsx("input",{type:"number",step:"0.1",...N("discountAllowed"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("textarea",{...N("address"),rows:2,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{E(!1),x(null),z()},className:"px-4 py-2.5 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:K.isPending,className:"px-4 py-2.5 bg-amber-600 text-white rounded-lg font-medium hover:bg-amber-700 disabled:opacity-50",children:K.isPending?"Saving...":"Save Changes"})]})]})}),e.jsx(X,{isOpen:je,onClose:()=>{R(!1),x(null),_()},title:"Mark Commission as Paid",size:"md",children:e.jsxs("form",{onSubmit:Ae(Re),className:"space-y-4",children:[m&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Agent: ",e.jsx("span",{className:"font-medium text-gray-900",children:((de=m.agent)==null?void 0:de.name)||m.partnerName||"Agent"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Amount: ",e.jsx("span",{className:"font-medium text-gray-900",children:B(m.amount)})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Payment Method ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...I("paymentMethod",{required:"Payment method is required"}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"",children:"Select payment method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"upi",children:"UPI"}),e.jsx("option",{value:"cheque",children:"Cheque"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Reference"}),e.jsx("input",{type:"text",...I("paymentReference"),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Transaction ID / Cheque No."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Date"}),e.jsx("input",{type:"date",...I("paymentDate"),defaultValue:new Date().toISOString().split("T")[0],className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{...I("notes"),rows:2,className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"Any additional notes..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{R(!1),x(null),_()},className:"px-4 py-2.5 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:W.isPending,className:"px-4 py-2.5 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 disabled:opacity-50",children:W.isPending?"Processing...":"Confirm Payment"})]})]})})]})})}export{ds as default};
