import{l as b,u as f,b as h,c as g,j as e,L as l,F as p,m as j,f as N,g as P,z as n}from"./index-C_dz8F6N.js";function v(){const[c]=b(),m=f(),r=c.get("token")||"",{register:o,handleSubmit:u,watch:x,formState:{errors:s}}=h({defaultValues:{newPassword:"",confirmPassword:""}}),a=g({mutationFn:P.resetPassword,onSuccess:()=>{n.success("Password reset successful"),m("/login")},onError:t=>{var i,d;n.error(((d=(i=t.response)==null?void 0:i.data)==null?void 0:d.message)||"Failed to reset password")}}),w=t=>{if(!r){n.error("Invalid reset link");return}a.mutate({token:r,newPassword:t.newPassword})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs(l,{to:"/",className:"inline-flex items-center space-x-2",children:[e.jsx(p,{className:"h-10 w-10 text-blue-600"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:"Docsy ERP"})]})}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(j,{className:"text-2xl text-blue-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Set New Password"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Choose a strong password for your account."})]}),e.jsxs("form",{onSubmit:u(w),className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",...o("newPassword",{required:"New password is required",minLength:{value:8,message:"Password must be at least 8 characters"}}),className:`w-full px-4 py-3 rounded-lg border ${s.newPassword?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-blue-500`}),s.newPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.newPassword.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",...o("confirmPassword",{required:"Confirm password is required",validate:t=>t===x("newPassword")||"Passwords do not match"}),className:`w-full px-4 py-3 rounded-lg border ${s.confirmPassword?"border-red-500":"border-gray-300"} focus:outline-none focus:ring-2 focus:ring-blue-500`}),s.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:s.confirmPassword.message})]}),e.jsx("button",{type:"submit",disabled:a.isPending||!r,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition disabled:opacity-50 flex items-center justify-center",children:a.isPending?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"animate-spin mr-2"}),"Resetting..."]}):"Reset Password"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(l,{to:"/login",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Back to Login"})})]})]})})}export{v as default};
